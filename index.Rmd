---
title: "Computational Musicology Portfolio"
author: "Nina Verheijen"
date: "9-2-2021"
output: 
  flexdashboard::flex_dashboard:
    storyboard: true
    theme: flatly
---

### Intorduction

Starting in Berlin in 1994, Rammstein has been around for almost 30 years. With their first album *Herzeleid* released in September 1995, and their lates album *Rammstein* in May 2019, a lot has changed in the music industry since they first started. This raises the question whether their music has changed as well, and if so, how?

To answer this question, a corpus is used which consists of  the seven studio albums from Rammstein (77 tracks);

* *Herzeleid* (1995)
* *Sehnsucht* (1997)
* *Mutter* (2001)
* *Reise, Reise* (2004)
* *Rosenrot* (2005)
* *Liebe ist f√ºr alle da* (2009)
* *Rammstein* (2019)

In addition to this two live albums were also inlcuded (27 tracks);

* *Live aus Berlin* (1999)
* *Rammstein: Paris* (2017)

The studio albums were included to see if their music changed over time and if so how? What changed? What did not change through all those years? Are there similarities between albums?
The studio albums are added because it might also be interesting to look at differneces between live and studio albums.

The comparison points in this corpus are between the different studio albums, between the live albums and their corresponding studio tracks and between the live albums.

The corpus is quite representative as there are plenty of albums, and thus tracks, to compare. However, when looking at changes in albums over time, it has to be noted that 6 of the 7 studio albums were released in a 14 year time period (1995-2009), and in the last 12 years only one album has been released.

A few tracks that are atypical are *Diamant*, *Roter Sand*, *Los* and *Ein Lied*. *Diamant* and *Roter Sand* have sound a lot more like ballads than the industrial metal we're used from Rammstein. *Los* and *Ein Lied* both have a more slow, easy going tempo and have less distortion than other songs in the corpus.


```{r echo = FALSE, message=FALSE}
library(tidyverse)
library(dplyr)
library(spotifyr)
library(ggplot2)
library(plotly)
library(compmus)
```

```{r echo = FALSE}
all_data_rammstein <- get_playlist_audio_features("","4ubZwxPRbLmmaxwsrcoksY")

rammstein_paris <- get_playlist_audio_features("","4td6SJ4cvyFWgJn9I9EtnT")
rammstein_berlin <- get_playlist_audio_features("","1YWLnvtP4lgROQWB7HqZxT")

  

rammstein <- all_data_rammstein%>%
  select(c(36, 50, 6:16))

rammstein_live <- bind_rows(
  rammstein_paris %>% mutate(category = "live at paris"),
  rammstein_berlin %>% mutate(category = "live at berlin") 
  )%>%
  select(c(36, "category", 50, 6:16))


rammstein_not_live <- get_playlist_audio_features("","0A0m04BWQCIozwguPMaRzE") %>%
  select(c(36, 50, 6:16))

live_not_live <- bind_rows(
  rammstein_live,
  rammstein_not_live %>% mutate(category = "studio")
)

rammstein_sum <- rammstein%>%
  group_by(track.album.release_date)%>%
  summarise(
    mean_speechiness = mean(speechiness),
    mean_acousticness = mean(acousticness),
    mean_liveness = mean(liveness),
    mean_energy = mean(energy),
    mean_danceability = mean(danceability),
    mean_tempo = mean(tempo),
    mean_instrumentalness = mean(instrumentalness),
    mean_key = mean(key),
    mean_valence = mean(valence)
  )



```


### What changed between the first and last album from Rammstein?


```{r echo = FALSE}
rammstein_2019 <- rammstein %>%
  filter(track.album.release_date == "2019-05-17")

rammstein_1995 <- rammstein %>%
  filter(track.album.release_date == "1995-09-24")

rammstein_first_last <- bind_rows(rammstein_1995, rammstein_2019)

rammstein_f_l_val <- ggplot(rammstein_first_last, aes(valence, danceability, color=track.album.release_date, size=instrumentalness, label=track.name))+
  geom_point() 

ggplotly(rammstein_f_l_val)
```



***

When comparing the first and last album, the first one released in 1995 and the last one released in 2019, a few things have changed when looking at spotify features.


The features with the most change are danceability, valence and instrumentalness. The danceability, valence and instrumentalness are all lower in the last album than in the first album. 

### Rammstein's albums over time.

```{r echo=FALSE}
rammstein_dance_val <- ggplot(rammstein, aes(track.album.release_date, danceability, size=valence, color=instrumentalness, label=track.name)) +
  geom_point(alpha = 0.5) 

rammstein_dance_val
```

***

To see if this was also the case when looking at all albums, the valence, danceability and instrumentalness were plotted for each album. It is clear that the danceability decreases over time, and with that the valence and instrumentalness as well.

The last album has the most variation in danceablity and valence. However, the instrumentalness stays quit the same for most tracks in the last album.





### Comparing live tracks to studio tracks.


```{r echo=FALSE}


rammstein_live_not_live <- ggplot(live_not_live, aes(valence, danceability, size=instrumentalness, color=category, label=track.name)) +
  geom_point(alpha=0.81) 


ggplotly(rammstein_live_not_live)
```

*** 
When comparing the live tracks, both from Berlin (1999) and from Paris (2017), to the studio tracks it is clear that the studio tracks have a higher valence and more danceability.

Note: I am trying to draw lines between tracks with the same name but have not figured out yet how to do that, but I hope that once I add that this visualization will provide some more insight.



### Comparing two live versions of *Du hast*, one of the most iconic songs of Rammstein.

```{r}
Du_hast_berlin <-
  get_tidy_audio_analysis("7c6jrUp0VsgLXhlzP4QZSy") %>%
  select(segments) %>%
  unnest(segments) %>%
  select(start, duration, pitches)



Du_hast_paris <-
  get_tidy_audio_analysis("0qrwXiw0o8aoXHbaqSAAzz") %>%
  select(segments) %>%
  unnest(segments) %>%
  select(start, duration, pitches)


compmus_long_distance(
  Du_hast_berlin %>% mutate(pitches = map(pitches, compmus_normalise, "euclidean")),
  Du_hast_paris %>% mutate(pitches = map(pitches, compmus_normalise, "euclidean")),
  feature = pitches,
  method = "angular"
) %>%
  ggplot(
    aes(
      x = xstart + xduration / 2,
      width = xduration,
      y = ystart + yduration / 2,
      height = yduration,
      fill = d
    )
  ) +
  geom_tile() +
  coord_equal() +
  labs(x = "Du hast live Berlin (1999)", y = "Du hast live Paris (2017)") +
  theme_minimal() +
  scale_fill_viridis_c(guide = NULL)
```

***
When comparing a track that was played live in 1999 and in 2017 a small diagonal line can be seen in the middle, which indicates that the tracks are indeed somewhat similar.
